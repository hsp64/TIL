# 25년 9월 9일


---

# Zustand

## 개요
Zustand는 React 애플리케이션을 위한 간단하고 가벼운 상태 관리 라이브러리입니다. Redux의 복잡함 없이 전역 상태를 관리할 수 있는 현대적인 해결책입니다.

## 주요 특징

### 1. 간단한 API
- 복잡한 보일러플레이트 코드가 불필요
- 직관적인 함수형 API 제공
- TypeScript와 완벽 호환

### 2. 작은 번들 크기
- 압축 후 약 2.5KB의 매우 작은 크기
- 의존성이 거의 없음
- 성능에 미치는 영향 최소화

### 3. React 컴포넌트와 독립적
- React 컴포넌트 밖에서도 상태 접근 가능
- vanilla JavaScript 환경에서도 사용 가능

## 기본 사용법

### 스토어 생성
```javascript
import { create } from 'zustand'

const useStore = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 })),
  reset: () => set({ count: 0 })
}))
```

### 컴포넌트에서 사용
```javascript
function Counter() {
  const { count, increment, decrement, reset } = useStore()
  
  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={increment}>+</button>
      <button onClick={decrement}>-</button>
      <button onClick={reset}>Reset</button>
    </div>
  )
}
```

### 부분적 상태 구독
```javascript
// 특정 값만 구독하여 불필요한 리렌더링 방지
const count = useStore((state) => state.count)
const increment = useStore((state) => state.increment)
```

## 고급 패턴

### 1. 비동기 액션
```javascript
const useStore = create((set, get) => ({
  data: null,
  loading: false,
  fetchData: async () => {
    set({ loading: true })
    try {
      const response = await fetch('/api/data')
      const data = await response.json()
      set({ data, loading: false })
    } catch (error) {
      set({ loading: false, error })
    }
  }
}))
```

### 2. 미들웨어 사용
```javascript
import { devtools, persist } from 'zustand/middleware'

const useStore = create(
  devtools(
    persist(
      (set) => ({
        count: 0,
        increment: () => set((state) => ({ count: state.count + 1 }))
      }),
      { name: 'counter-storage' }
    )
  )
)
```

### 3. 스토어 분할
```javascript
// 작은 스토어들로 분할하여 관리
const useAuthStore = create((set) => ({
  user: null,
  login: (user) => set({ user }),
  logout: () => set({ user: null })
}))

const useCartStore = create((set) => ({
  items: [],
  addItem: (item) => set((state) => ({ 
    items: [...state.items, item] 
  }))
}))
```

## Redux와의 비교

### Zustand의 장점
- 훨씬 적은 코드량
- 액션 타입과 리듀서가 불필요
- Provider 래핑이 불필요
- 더 나은 TypeScript 지원

### Redux가 나은 경우
- 매우 복잡한 상태 로직
- 시간 여행 디버깅이 중요한 경우
- 엄격한 상태 변경 추적이 필요한 경우

## 실제 프로젝트에서의 활용

### 1. 전역 UI 상태 관리
```javascript
const useUIStore = create((set) => ({
  sidebarOpen: false,
  theme: 'light',
  toggleSidebar: () => set((state) => ({ 
    sidebarOpen: !state.sidebarOpen 
  })),
  setTheme: (theme) => set({ theme })
}))
```

### 2. 폼 상태 관리
```javascript
const useFormStore = create((set) => ({
  formData: {},
  errors: {},
  updateField: (field, value) => set((state) => ({
    formData: { ...state.formData, [field]: value }
  })),
  setErrors: (errors) => set({ errors })
}))
```

## 성능 최적화 팁

### 1. 선택적 구독 사용
```javascript
// 좋은 예: 필요한 값만 구독
const count = useStore(state => state.count)

// 나쁜 예: 전체 스토어 구독
const store = useStore()
```

### 2. 객체 참조 최적화
```javascript
import { shallow } from 'zustand/shallow'

// 얕은 비교를 통한 최적화
const { name, age } = useStore(
  state => ({ name: state.name, age: state.age }),
  shallow
)
```
