# 25년 8월 28일

---

# React 동적 스타일링

- React에서 다양한 방법으로 동적 스타일링을 구현하는 방법을 이해하고, 각 방법의 장단점을 파악하여 프로젝트 상황에 맞는 최적의 방법을 선택할 수 있도록 한다.

### 1. 동적 인라인 스타일 설정

React에서는 JavaScript의 동적인 특성을 이용하여 인라인 스타일을 동적으로 설정할 수 있다. `style` prop에 객체를 전달하여 달성할 수 있으며, 이 객체의 각 키는 CSS 속성을, 각 값은 CSS 속성 값에 해당하는 문자열을 나타낸다.

```jsx
<label style={{ color: !isValid ? "red" : "black" }}>나의 목표</label>
<input
  style={{
    borderColor: !isValid ? "red" : "black",
    background: !isValid ? "salmon" : "transparent"
  }}
  type="text"
  onChange={goalInputChangeHandler}
/>
```

#### 동적 인라인 스타일의 단점

그럼에도 불구하고, 동적인 인라인 스타일 사용은 여러 가지 이유로 권장되지 않는다.

1. **Specificity**: 인라인 스타일은 CSS의 다른 모든 형태에 비해 우선순위가 높다. 이로 인해 CSS 규칙의 우선 순위가 깨질 수 있으며, 이를 해결하려면 '!important' 키워드를 사용해야 할 수도 있다.
2. **Reuse and Organization**: 인라인 스타일은 재사용이 어렵다. CSS를 별도의 파일 또는 스타일 컴포넌트로 분리하면 여러 컴포넌트에서 동일한 스타일을 쉽게 재사용할 수 있다.
3. **Performance**: 인라인 스타일은 매번 새로운 객체를 생성하므로, 컴포넌트가 리렌더링 될 때마다 메모리 사용량이 증가하고 렌더링 성능에 부담을 줄 수 있다.

따라서, 동적으로 변경되어야 하는 스타일이 있는 경우 CSS 클래스를 동적으로 토글하거나, CSS-in-JS 라이브러리 (Styled-components, Emotion 등)를 사용하는 것이 더 좋은 선택일 수 있다.

### 2. 동적 클래스 설정

React에서는 JavaScript의 동적인 특성을 이용하여 클래스 이름을 동적으로 설정할 수 있다. 이는 `className` prop을 사용하여 달성할 수 있다. 동적인 클래스 이름은 JavaScript의 템플릿 리터럴 기능을 사용하여 쉽게 구성할 수 있다.

```jsx
<div className={`form-control ${!isValid ? 'invalid' : ''}`}>
```

#### 동적 클래스 사용의 단점과 대안

동적 클래스 설정 방법은 CSS를 분리하여 관리하고 재사용하기 쉽다는 장점이 있지만, 여전히 몇 가지 단점이 있다.

1. **Class Naming**: 클래스 이름 충돌을 피하기 위해선 복잡한 네이밍 규칙을 필요로 한다. 이는 코드의 가독성을 떨어트릴 수 있다.
2. **String Manipulation**: 문자열 조작을 통해 클래스 이름을 생성하면서 발생하는 문제가 있을 수 있다. JavaScript의 템플릿 리터럴은 사용하기 간편하지만, 복잡한 클래스 토글링에서는 코드가 복잡해질 수 있다.

위 단점들을 극복하고자 CSS-in-JS 라이브러리가 주로 사용된다. Styled-components, Emotion 같은 라이브러리는 스타일을 JavaScript 코드와 통합하여 관리할 수 있게 해준다.

### 3. Styled-components

Styled-components는 CSS-in-JS 라이브러리 중 하나로, JavaScript 코드 내에서 CSS 스타일을 작성할 수 있게 해준다. 이 라이브러리는 스타일이 적용된 컴포넌트를 생성하므로, CSS 클래스 이름 충돌 문제를 피하고 스타일의 재사용성을 높일 수 있다.

#### 설치하기

```bash
npm install styled-components
```

#### 사용 방법

```jsx
import styled from 'styled-components';

const Button = styled.button`
  font: inherit;
  padding: 0.5rem 1.5rem;
  border: 1px solid #8b005d;
  color: white;
  background: #8b005d;
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.26);
  cursor: pointer;
`;

// 사용
<Button onClick={handleClick}>Click me</Button>
```

#### Styled-components의 동적 props

Styled-components 라이브러리는 동적 props를 통해 컴포넌트의 스타일을 조건부로 변경할 수 있게 해준다. 컴포넌트에 전달된 props를 CSS에 직접 적용할 수 있어, 컴포넌트의 상태에 따라 동적으로 스타일을 변경하는 것이 가능하다.

```jsx
const FormControl = styled.div`
  & label {
    color: ${props => (props.invalid ? 'red' : 'black')};
  }

  & input {
    border: 1px solid ${props => (props.invalid ? 'red' : '#ccc')};
    background: ${props => (props.invalid ? '#ffd7d7' : 'transparent')};
  }
`;

// 사용
<FormControl invalid={!isValid}>
  <label>나의 목표</label>
  <input type="text" onChange={goalInputChangeHandler} />
</FormControl>
```

### 4. CSS Modules

React에서 CSS 모듈은 각 컴포넌트에 대해 고유한 클래스 이름을 생성하여 스타일 충돌을 방지하는 기술이다. 이를 통해 CSS를 모듈화하여 각 컴포넌트에서 독립적으로 사용할 수 있게 해준다.

#### 사용 방법

1. CSS 파일을 생성하며, 파일 이름에 `.module.css`를 붙인다.

```css
/* Button.module.css */
.button {
  background-color: blue;
  color: white;
}
```

2. CSS 파일을 컴포넌트 파일에서 import한다.

```jsx
import styles from './Button.module.css';
```

3. JSX에서 `className` prop에 클래스 이름을 지정할 때 이 객체를 사용한다.

```jsx
<button className={styles.button}>Click me</button>
```

#### CSS Modules의 장점

- **스타일 충돌 방지**: 각 CSS 모듈은 고유한 클래스 이름을 생성하므로 스타일 충돌을 걱정할 필요가 없다.
- **코드의 재사용성과 유지 보수성 개선**: 각 컴포넌트는 자신만의 스타일을 갖기 때문에, 컴포넌트의 코드 재사용성과 유지 보수성이 향상된다.
- **명확한 의존성**: CSS 파일이 JavaScript 파일에 명시적으로 import되므로, 어떤 스타일이 어떤 컴포넌트에 적용되는지 명확히 알 수 있다.
- **전역 스타일과의 조화**: 필요한 경우, CSS 모듈 외에도 전역 스타일을 적용할 수 있다.

#### CSS Modules의 동적 클래스 추가

CSS Modules는 런타임에 동적으로 클래스 이름을 결정할 수 있도록 지원한다. React에서는 JavaScript의 템플릿 리터럴과 조건부 연산자를 사용하여 동적으로 클래스 이름을 결정할 수 있다.

```jsx
import React, { useState } from "react";
import Button from "../../UI/Button/Button";
import styles from "./CourseInput.module.css";

const CourseInput = ({ onAddGoal }) => {
  const [enteredValue, setEnteredValue] = useState("");
  const [isValid, setIsValid] = useState(true);

  const goalInputChangeHandler = (e) => {
    if (e.target.value.trim().length > 0) {
      setIsValid(true);
    }
    setEnteredValue(e.target.value);
  };

  const formSubmitHandler = (e) => {
    e.preventDefault();
    if (enteredValue.trim().length === 0) {
      setIsValid(false);
      return;
    }
    onAddGoal(enteredValue);
  };

  return (
    <form onSubmit={formSubmitHandler}>
      <div className={`${styles['form-control']} ${!isValid && styles.invalid}`}>
        <label>나의 목표</label>
        <input type="text" onChange={goalInputChangeHandler} />
      </div>
      <Button type="submit">목표 추가하기</Button>
    </form>
  );
};

export default CourseInput;
```

### 5. Styled-components vs CSS Modules 비교

#### 공통점

1. **컴포넌트 스코프 CSS**: 둘 다 컴포넌트 수준의 스코프를 가진 CSS를 제공한다. 이는 CSS의 전역적인 특성을 해결하여 스타일 충돌을 방지하고, 컴포넌트의 재사용성과 유지 보수성을 개선한다.
2. **명확한 의존성**: 둘 다 CSS를 JavaScript 파일 내에 명시적으로 선언하므로, 어떤 스타일이 어떤 컴포넌트에 적용되는지 명확하게 알 수 있다.

#### 차이점

1. **CSS 작성 방식**: CSS Modules는 전통적인 CSS 문법을 사용하는 반면, Styled-components는 JavaScript 내부에 CSS를 작성하며, 이를 통해 props 기반의 동적 스타일링이 가능하다.
2. **스타일 적용 방식**: CSS Modules에서는 CSS 클래스 이름을 import하여 JSX에 적용하는 반면, Styled-components에서는 스타일이 적용된 컴포넌트를 직접 생성한다.
3. **성능**: Styled-components는 런타임에 스타일을 주입하기 때문에, 큰 앱에서는 CSS Modules에 비해 성능에 약간의 영향을 줄 수 있다. 반면에, CSS Modules는 빌드 타임에 CSS를 처리하므로 성능상의 이점이 있을 수 있다.

#### 선택 기준

1. **프로젝트의 요구사항**: 스타일이 동적으로 자주 변경되어야 한다면, Styled-components의 동적 스타일링 기능이 유용할 수 있다. 반면에, 전통적인 CSS 작성 방식을 선호하거나 빌드 타임에 CSS를 처리하고 싶다면 CSS Modules가 더 좋을 수 있다.
2. **팀의 선호도**: 개발 팀 내에서 편안하게 사용할 수 있는 도구를 선택하는 것이 중요하다.
3. **커뮤니티와 지원**: 둘 다 잘 관리되고 널리 사용되는 라이브러리지만, 특정 도구에 대한 커뮤니티 지원이나 추가 패키지가 프로젝트에 더 적합할 수 있다.

## 핵심 정리

1. **인라인 스타일**은 간단하지만 성능과 재사용성 측면에서 권장되지 않는다.
2. **동적 클래스**는 전통적인 CSS와 호환되지만 클래스명 관리의 복잡성이 있다.
3. **Styled-components**는 JS 안에서 CSS를 작성하며 props 기반 동적 스타일링이 강력하다.
4. **CSS Modules**는 전통적인 CSS 문법을 유지하면서 스코프를 제한하여 안전한 스타일링을 제공한다.
